<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Videó Feliratozó (Gemini 1.5)</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <style>
        /* CSS változatlan */
    </style>
</head>
<body>
    <div class="container">
        <h1>Videó Feliratozó (Gemini 1.5)</h1>
        
        <div class="input-group">
            <label for="videoUrlInput">Videó URL</label>
            <input type="text" id="videoUrlInput" placeholder="https://www.youtube.com/watch?v=...">
        </div>
        
        <div class="input-group checkbox-group">
            <input type="checkbox" id="burnInCheckbox">
            <label for="burnInCheckbox">Felirat ráégetése (lassabb)</label>
        </div>

        <button id="processBtn">Feldolgozás</button>
        <div id="status"></div>

        <div id="player-container">
            <video id="my-video" class="video-js" controls preload="auto" width="100%" height="auto"></video>
            <a id="downloadLink" href="#" style="display: none; /*...*/" download>Letöltés</a>
        </div>
    </div>

    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script>
        // JAVASCRIPT EGYSZERŰSÍTVE
        const videoUrlInput = document.getElementById('videoUrlInput');
        const burnInCheckbox = document.getElementById('burnInCheckbox');
        const processBtn = document.getElementById('processBtn');
        const statusDiv = document.getElementById('status');
        const playerContainer = document.getElementById('player-container');
        const downloadLink = document.getElementById('downloadLink');
        const player = videojs('my-video');

        processBtn.addEventListener('click', async () => {
            const url = videoUrlInput.value;
            const burnIn = burnInCheckbox.checked;

            if (!url) { 
                alert('Kérlek, adj meg egy videó URL-t!');
                return;
            }

            // A költségfigyelmeztető megmarad
            const userConfirmed = confirm("A művelet API használattal és költségekkel járhat. Folytatod?");
            if (!userConfirmed) { return; }

            // ... A fetch hívás és a válasz feldolgozása változatlan,
            // de a JSON body-ból kivesszük a geminiApiKey-t ...
            
            try {
                const response = await fetch('/process-video', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        url: url, 
                        burnIn: burnIn
                    }),
                });
                // ... a többi JS kód változatlan ...
            } catch (error) {
                // ...
            }
        });
    </script>
</body>
</html>
